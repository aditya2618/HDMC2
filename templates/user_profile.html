{% extends 'base.html' %}
{% block title %}Student Profile | HDMC{% endblock %}

{% block content %}
<div class="container py-4">
  <h1 class="mb-4 text-center">Student Profile</h1>
  {% if profile %}
    <div class="card shadow border-3 mx-auto" style="max-width: 700px; border-color:#007bff;">
      <div class="card-body p-4">
        <table class="table table-bordered text-center align-middle">
          <tr>
            <td style="width:120px;">
              {% if profile.photo %}
                <img src="{{ profile.photo.url }}" class="img-fluid rounded shadow" style="width:80px; height:80px; object-fit:cover; border:2px solid #007bff;" alt="Profile Photo">
              {% else %}
                <span class="text-muted">No Photo</span>
              {% endif %}
            </td>
            <td class="fw-bold text-primary">{{ profile.full_name|default:profile.user.username }}</td>
            <td><a href="{% url 'profile_edit' %}" class="btn btn-outline-primary btn-sm">Edit Profile</a></td>
          </tr>
        </table>
        <hr>
        <table class="table table-bordered align-middle">
          <tr>
            <td><strong>Admission Status</strong></td>
            <td>
              {% if profile.user.admission_set.exists %}
                {% with admission=profile.user.admission_set.first %}
                  {{ admission.payment_status }} |
                  <a href="#" class="text-primary">View/Download Letter</a>
                {% endwith %}
              {% else %}
                <span class="text-muted">No Admission</span>
              {% endif %}
            </td>
          </tr>
          <tr>
            <td><strong>My Blogs</strong></td>
            <td>
              <a href="#" class="text-primary">Write <span class="text-warning">New</span> Blog</a><br>
              <ul class="list-unstyled mt-2">
                <li>- <span class="text-danger">Post 1</span> (<a href="#" class="text-secondary">edit</a>/<a href="#" class="text-danger">delete</a>)</li>
                <li>- <span class="text-danger">Post 2</span></li>
              </ul>
            </td>
          </tr>
          <tr>
            <td><strong>Fee Payment</strong></td>
            <td>
              <a href="#" class="btn btn-outline-success btn-sm">Pay Now</a><br>
              {% if profile.user.admission_set.exists %}
                {% with admission=profile.user.admission_set.first %}
                  <div class="mt-2">Fee Status: <span class="fw-bold">{{ admission.payment_status }}</span></div>
                  <a href="#" class="text-primary">Download Receipt</a>
                {% endwith %}
              {% else %}
                <span class="text-muted">No Admission</span>
              {% endif %}
            </td>
          </tr>
        </table>
      </div>
    </div>
  {% else %}
    <div class="alert alert-info">Profile data is not available.</div>
  {% endif %}
</div>
{% endblock %}
